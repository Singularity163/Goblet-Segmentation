# Goblet-Segmentation

This repository is for pipeline and software for the Quantitative Analysis of Goblet Cells.

### Pipeline

In short, the pipeline consists of:

1. Inputting image through an optional preprocessing + watershed step to identify cell locations (AKA prompts).
2. Passsing automatically generated and/or manual prompts into the Segment Anything Model (SAM) by Meta.
3. Running analysis on the binary masks generated by SAM to generate information about the cells.

### Future works can include:

- Modernizing and updating GUI
- Finetuning SAM specific to use case
- Updating / replacing Watershed technique with more robust prompt generation techniques

## Installation

Requirements should be installed based on user's PC specs. Using `pip`, install `requirements.txt` for CUDA enabled PCs, and `requirements_ngpu.txt` otherwise.

## Use

The `start.bat` should launch the app if the correct requirements are installed, otherwise run `main.py` in `src`.

## Repo In a Nutshell

| Package   | Description                                                                                                                                         | Contributors                         |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------ |
| main      | Contains all the GUI related code for the project.                                                                                                  | Ankang Luo <br> Alvin Hendricks          |
| sam       | Contains code to generate SAM instance and run segmentation. The utility also contains functions for rendering annotations and IO tools for saving. | Alvin Hendricks <br> Ankang Luo           |
| watershed | Contains code to run preprocessing and Watershed pipeline. Also contain utility functions that generate figures and annotations for use in the GUI. | Rhea Kaul <br> Ankang Luo <br> Alvin Hendricks |
| metrics   | Contains the code for analyzing and generating metrics from binary images.                                                                          | Alvin Hendricks                      |
| test      | Contains testing code for SAM generation.                                                                                                           | Alvin Hendricks                      |
